/* src/App.css */
.App {
  text-align: center;
  width: 100%;
  height: 100%;
  position: relative; 
}

/* --- Boss Round Indicator (Wrapper) --- */
.boss-round-indicator {
    position: absolute;
    top: 10px;
    right: 10px;
    z-index: 20;
    pointer-events: none;
    
    /* Default appearance (when "BOSS ROUND!" text is visible) */
    background: rgba(0, 0, 0, 0.7);
    padding: 10px 20px;
    border-radius: 8px;
    
    color: #FF4444; /* Red warning color */
    font-size: 1.8rem; 
    font-weight: bold;
    text-shadow: 0 0 10px #FF0000;
    border: 2px solid #FF0000;
    
    display: flex;
    align-items: center;
    gap: 15px;
    box-sizing: border-box;
    
    /* Simple pulse animation */
    animation: bossPulse 1s infinite alternate;
    
    transition: all 0.5s ease; /* Smooth transition for arrow-only state */
}

/* State when "BOSS ROUND!" text disappears (after 5 seconds) */
.boss-round-indicator.arrow-only {
    background: transparent; /* Remove background */
    border: none; /* Remove border */
    box-shadow: none; /* Remove shadow */
    animation: none; /* Stop pulse */
    padding: 0; /* Remove padding */
    
    /* Reposition to the top right corner of the screen (or near it) */
    top: 20px;
    right: 20px;
    
    /* When only the arrow is left, ensure flex alignment doesn't break positioning */
    display: inline-block;
}

/* Arrow Container (Handles the directional rotation) */
.boss-direction-arrow-container {
    width: 30px; 
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: flex-end; 
    
    /* Transform origin must be in the center for correct rotation */
    transform-origin: center center;
    transition: transform 0.1s linear; 
    
    /* Ensure it acts as a wrapper */
    position: relative; 
    line-height: 0; /* Ensures container is centered correctly */
}

/* Arrow Shape (CSS Triangle) */
.boss-direction-arrow {
    width: 0;
    height: 0;
    
    /* Define a bold red triangle pointing right */
    border-top: 15px solid transparent; /* Height of the arrow half */
    border-bottom: 15px solid transparent; /* Height of the arrow half */
    border-left: 25px solid #FF0000; /* Width of the arrow head */
    
    /* Make it look brighter and more visible */
    filter: drop-shadow(0 0 5px #FF0000) drop-shadow(0 0 2px #FF0000); 
    
    /* Push the point closer to the edge of the container */
    margin-right: -10px; 
}

@keyframes bossPulse {
    from {
        box-shadow: 0 0 15px rgba(255, 0, 0, 0.5);
    }
    to {
        box-shadow: 0 0 25px rgba(255, 0, 0, 0.9);
    }
}
/* --- End Boss Round Indicator --- */


/* --- Main Menu Overlay --- */
.main-menu-overlay {
  position: absolute;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.95); /* Very dark to emphasize contrast */
  display: flex;
  flex-direction: column; 
  align-items: center;
  justify-content: center;
  z-index: 900; 
  color: white;
  text-align: center;
  padding: 20px;
  box-sizing: border-box; 
  pointer-events: auto; 
}

.main-menu-overlay h1 {
  margin: 0 0 30px 0;
  color: #61dafb; /* Blue title */
  font-size: 4rem;
  text-shadow: 0 0 10px #61dafb, 0 0 20px #61dafb;
}

.menu-leaderboard-container {
    margin-bottom: 40px;
    width: 90%;
    max-width: 400px;
}

.menu-leaderboard-container h3 {
    color: #FFFF00; /* Yellow subheading */
    font-size: 1.5rem;
    margin-bottom: 15px;
    text-shadow: 0 0 5px #FFFF00;
}

.menu-buttons {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.menu-buttons .restart-button {
    font-size: 1.5rem;
    padding: 15px 50px;
}

/* Specific styling for the table on the menu */
.score-table.small-table {
  font-size: 1rem; /* Smaller font for the menu table */
}

/* --- End Main Menu --- */


/* --- In-Game UI Overlay Wrapper --- */
.game-ui-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 10; 
  pointer-events: none; /* Allows clicking through to the game */
}


/* --- game-stats HUD --- */
.game-stats {
  position: absolute; 
  top: 10px;
  left: 10px;
  z-index: 20;
  pointer-events: auto; /* This element IS clickable (for pause) */
  
  color: white;
  display: flex;
  flex-wrap: wrap; 
  align-items: center; 
  justify-content: flex-start; 
  gap: 20px;
  font-size: 1.2rem; 
  
  background: rgba(0, 0, 0, 0.3);
  padding: 10px;
  border-radius: 8px;
  border: 1px solid rgba(97, 218, 251, 0.3);
  box-sizing: border-box; 
}

/* --- NEW: Horizontal Player Health Bar Styling --- */
.player-health-bar-container {
  display: flex;
  align-items: center;
  gap: 8px;
  color: #00ff00; /* Default green number/text */
  font-size: 1.2rem;
  order: -1; /* Place health before score for better visual flow */
}

.player-health-bar-container .health-number {
  color: #00ff00; 
}

.player-health-bar-container .health-max {
  color: #FFFFFF; 
}

.player-health-bar-container.health-low .health-number {
   color: #FF4444; /* Low health warning color */
   text-shadow: 0 0 5px #FF0000;
}

.health-bar-wrapper {
  width: 120px; /* Fixed width for the bar */
  height: 12px;
  background-color: #333333;
  border: 1px solid #00ff00;
  border-radius: 3px;
  overflow: hidden;
  box-shadow: 0 0 5px rgba(0, 255, 0, 0.5);
}

.player-health-bar-container.health-low .health-bar-wrapper {
  border: 1px solid #FF4444; 
  box-shadow: 0 0 5px rgba(255, 0, 0, 0.7);
}


.health-bar-fill {
  height: 100%;
  background-color: #00ff00;
  transition: width 0.3s ease-out, background-color 0.3s ease-out;
}

.player-health-bar-container.health-low .health-bar-fill {
   background-color: #FF4444; 
}

/* REMOVED: .game-stats-health-low class from old implementation */


/* --- Player Stats Panel --- */
.player-stats {
  position: absolute;
  top: 80px;
  left: 10px;
  z-index: 20;
  pointer-events: none; 

  color: white;
  display: flex;
  flex-direction: column; 
  align-items: flex-start; 
  gap: 8px;
  font-size: 1.1rem; 
  
  background: rgba(0, 0, 0, 0.3);
  padding: 10px;
  border-radius: 8px;
  border: 1px solid rgba(97, 218, 251, 0.3);
  box-sizing: border-box; 
  min-width: 150px; /* Give it some space */
}

/* --- Weapon Stats List --- */
.weapon-stats-list {
  margin-top: 8px;
  padding-top: 8px;
  border-top: 1px solid rgba(255, 255, 255, 0.2);
  display: flex;
  flex-direction: column;
  gap: 6px; /* Space between weapon stats */
  width: 100%;
}
/* --- End Player Stats --- */


/* --- game-container (fullscreen background) --- */
/* Only needed when gameStatus is 'playing' */
#game-container {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%; 
  height: 100%;
  z-index: 1; 
  background: #000; 
}

#game-container canvas {
  width: 100% !important;
  height: 100% !important;
  object-fit: cover; 
}


/* --- MODIFIED: Game Over Overlay Style (Now Submission Form) --- */
.game-over-overlay {
  position: absolute;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.85); /* Slightly darker for submission focus */
  display: flex;
  flex-direction: column; 
  align-items: center;
  justify-content: center;
  z-index: 100; 
  pointer-events: auto; 
  color: white; /* Ensure text is visible */
}

.game-over-overlay h2 {
  color: #FF0000;
  font-size: 4rem;
  text-shadow: 0 0 10px #FF0000, 0 0 20px #FF0000;
  margin-bottom: 10px; /* Reduced margin */
}

.game-over-overlay .final-score-text {
    font-size: 1.5rem;
    color: #FFFF00;
    margin-bottom: 20px;
}

.score-submission-form {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 15px;
    margin-bottom: 10px;
}

.score-submission-form input {
    padding: 10px;
    font-size: 1.2rem;
    background-color: #1a1a2e;
    color: #61dafb;
    border: 2px solid #61dafb;
    border-radius: 5px;
    text-align: center;
    font-family: 'Share Tech Mono', monospace;
    width: 250px;
}

.score-submission-form .restart-button {
    font-size: 1.2rem;
    padding: 10px 20px;
}

.controls-text { display: none; }
/* --- END MODIFIED: Game Over Overlay --- */


/* --- NEW: Leaderboard Overlay Style --- */
.leaderboard-overlay {
  position: absolute;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.9);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 600; 
  color: white;
  pointer-events: auto; 
}

.leaderboard-overlay h2 {
  color: #00ff00; /* Green for success/high score */
  font-size: 3.5rem;
  text-shadow: 0 0 10px #00ff00;
  margin-bottom: 30px;
}

.score-table {
  width: 80%;
  max-width: 500px;
  border-collapse: collapse;
  background: rgba(26, 26, 46, 0.8);
  border: 2px solid #61dafb;
  box-shadow: 0 0 15px rgba(97, 218, 251, 0.5);
  font-size: 1.2rem;
}

.score-table th, .score-table td {
  padding: 12px;
  text-align: left;
  border-bottom: 1px solid rgba(97, 218, 251, 0.3);
}

.score-table th {
  background-color: #61dafb;
  color: #1a1a2e;
  text-transform: uppercase;
}

.score-table tbody tr:nth-child(1) {
    color: #FFFF00; /* Gold for first place */
    font-size: 1.4rem;
    text-shadow: 0 0 5px #FFFF00;
}
/* --- END NEW: Leaderboard Overlay --- */


/* --- UPDATED: Upgrade Overlay --- */
.upgrade-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.85);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start; /* --- CHANGED: Aligns header to top --- */
  z-index: 500; 
  color: white;
  pointer-events: auto; 
  overflow-y: auto; /* Allow scrolling if needed */
  padding: 30px 10px 10px 10px; /* --- CHANGED: Ensures top padding --- */
  box-sizing: border-box;
}

.upgrade-overlay h2 {
  color: #FFFF00; /* Yellow for level up */
  font-size: 3rem;
  text-shadow: 0 0 10px #FFFF00;
  margin-bottom: 10px;
}

.upgrade-overlay p {
  font-size: 1.2rem;
  margin-bottom: 30px;
}

/* --- UPDATED: Upgrade Choices --- */
.upgrade-choices {
  display: flex;
  flex-direction: row; /* Horizontal boxes */
  flex-wrap: nowrap; /* --- CHANGED: Prevents wrapping by default --- */
  justify-content: center;
  gap: 30px;
  margin-top: 20px;
  width: 100%;
  max-width: 750px; /* (220*3) + (30*2) = 720px */
}

/* --- Upgrade Card Styling --- */
.upgrade-card {
  /* Reset button styles */
  background: rgba(26, 26, 46, 0.9);
  border: 2px solid #61dafb;
  color: white;
  padding: 20px;
  font-family: 'Share Tech Mono', monospace;
  cursor: pointer;
  
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between; /* Pushes level badge down */
  
  width: 220px;
  min-height: 280px;
  border-radius: 10px;
  box-shadow: 0 0 10px rgba(97, 218, 251, 0.5), 0 0 20px rgba(97, 218, 251, 0.3);
  transition: all 0.2s ease-in-out;
  position: relative;
}

.upgrade-card:hover {
  transform: scale(1.05);
  background: #1a1a2e;
  box-shadow: 0 0 15px #61dafb, 0 0 30px #61dafb;
}

.upgrade-card h3 {
  font-size: 1.4rem;
  color: #FFFF00; /* Match title */
  text-shadow: 0 0 5px #FFFF00;
  margin: 0 0 15px 0;
  text-align: center;
}

.upgrade-card img {
  width: 64px;
  height: 64px;
  margin-bottom: 15px;
  object-fit: contain;
  background-color: rgba(0, 0, 0, 0.3);
  border-radius: 5px;
}

.upgrade-card p {
  font-size: 0.95rem;
  text-align: center;
  line-height: 1.4;
  margin-bottom: 15px;
  color: #f0f0f0;
  flex-grow: 1; /* Makes description fill space */
}

.upgrade-card .level-badge {
  font-size: 1rem;
  font-weight: bold;
  background: #61dafb;
  color: #1a1a2e;
  padding: 4px 10px;
  border-radius: 5px;
}
/* --- End Upgrade Card --- */


/* --- Pause Menu Overlay --- */
.pause-menu-overlay {
  position: absolute;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.85);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 500; 
  color: white;
  pointer-events: auto; 
}

.pause-menu-overlay h2 {
  color: #61dafb;
  font-size: 3rem;
  text-shadow: 0 0 10px #61dafb;
  margin-bottom: 30px;
}

.pause-menu-overlay .restart-button {
  font-size: 1.5rem;
  padding: 15px 30px;
  margin-bottom: 20px;
}
/* --- End Pause Menu --- */


/* New Button Style */
.restart-button {
  padding: 12px 24px;
  font-size: 1.2rem;
  cursor: pointer;
  background-color: #61dafb;
  color: #1a1a2e;
  border: none;
  border-radius: 5px;
  font-family: 'Share Tech Mono', monospace;
  font-weight: bold;
  text-transform: uppercase;
  transition: all 0.2s ease;
  box-shadow: 0 0 10px #61dafb;
  pointer-events: auto; 
}

/* New Button Style */
.restart-button-pause {
  padding: 12px 24px;
  font-size: 1.2rem;
  cursor: pointer;
  background-color: #fb6161;
  color: white;
  border: none;
  border-radius: 5px;
  font-family: 'Share Tech Mono', monospace;
  font-weight: bold;
  text-transform: uppercase;
  transition: all 0.2s ease;
  box-shadow: 0 0 10px #61dafb;
  pointer-events: auto; 
}

.restart-button:hover {
  background-color: #ffffff;
  color: #0f0c29;
  box-shadow: 0 0 20px #ffffff;
  transform: scale(1.05);
}

.restart-button-pause:hover {
  background-color: #ffffff;
  color: #0f0c29;
  box-shadow: 0 0 20px #ffffff;
  transform: scale(1.05);
}

/* --- Pause Button Style --- */
.pause-button {
  padding: 8px 10px; /* Adjusted padding for icon */
  font-size: 1rem;
  cursor: pointer;
  background-color: #61dafb;
  color: #1a1a2e;
  border: none;
  border-radius: 5px;
  font-family: 'Share Tech Mono', monospace;
  font-weight: bold;
  text-transform: uppercase;
  transition: all 0.2s ease;
  box-shadow: 0 0 10px #61dafb;
  pointer-events: auto; 
  
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 38px;
  min-height: 38px;
  box-sizing: border-box;
}

.pause-button:hover {
  background-color: #ffffff;
}

.pause-icon {
  width: 14px;
  height: 16px;
  position: relative;
}
.pause-icon::before,
.pause-icon::after {
  content: '';
  position: absolute;
  top: 0;
  width: 5px;
  height: 100%;
  background-color: #1a1a2e;
}
.pause-icon::before { left: 0; }
.pause-icon::after { right: 0; }


.App-link {
  color: #61dafb;
}


/* --- NEW: Media Queries for Mobile Responsiveness --- */

/* Targets tablets and landscape phones (<= 820px wide) */
@media (max-width: 820px) {
    /* Boss Indicator Adjustment */
    .boss-round-indicator {
        font-size: 1.5rem;
        padding: 8px 15px;
    }
    
  .upgrade-overlay h2 {
    font-size: 2.5rem; /* Smaller "LEVEL UP!" */
  }

  .upgrade-choices {
    gap: 15px; /* Tighter gap */
    max-width: 100%;
  }

  /* Make cards smaller so 3 can fit on landscape */
  .upgrade-card {
    width: 31%; /* Use percentage */
    min-height: 260px; /* Smaller height */
    padding: 15px;
    box-sizing: border-box;
  }
  .upgrade-card h3 {
    font-size: 1.3rem;
  }
  .upgrade-card img {
    width: 50px;
    height: 50px;
  }
  .upgrade-card p {
    font-size: 0.9rem;
  }
}


/* --- UPDATED: Targets portrait phones (<= 600px wide) --- */
@media (max-width: 600px) {
  /* Main Menu Adjustments */
  .main-menu-overlay h1 {
    font-size: 3rem;
  }
  .menu-buttons .restart-button {
      font-size: 1.2rem;
      padding: 12px 30px;
  }
  .menu-leaderboard-container {
      margin-bottom: 30px;
  }
  
  .game-stats {
    /* Make top bar font smaller and stack more cleanly */
    font-size: 1.0rem;
    gap: 10px;
    padding: 8px;
  }
   .player-stats {
    /* Make stats font smaller */
     font-size: 0.9rem;
     gap: 5px;
     padding: 8px;
     min-width: 120px;
   }
   
    /* Boss Indicator Adjustment */
    .boss-round-indicator {
        font-size: 1.2rem;
        padding: 6px 12px;
        gap: 8px;
    }

  /* Adjustments for the Health Bar on small screens */
  .player-health-bar-container {
    font-size: 1.0rem;
    gap: 5px;
  }
  .health-bar-wrapper {
    width: 80px;
    height: 10px;
  }
  
  /* Leaderboard table size on mobile */
  .score-table {
      width: 95%;
      font-size: 1rem;
  }
  .score-table th, .score-table td {
      padding: 8px;
  }


  .upgrade-overlay h2 {
    font-size: 2.2rem;
    margin-bottom: 15px; /* Added margin */
  }
  .upgrade-overlay p {
    font-size: 1.0rem;
    margin-bottom: 15px; /* Reduced margin */
  }

  .upgrade-choices {
    gap: 5px; /* --- CHANGED: Tighter gap --- */
    width: 100%; 
  }

  /* --- REPLACED: This block forces 3-across --- */
  .upgrade-card {
    width: 32%; /* --- CHANGED: Forces 3-across --- */
    min-height: auto; /* Let content decide height */
    padding: 10px;
    box-sizing: border-box;
  }
  .upgrade-card h3 {
    font-size: 1.0rem; /* Smaller text */
    margin-bottom: 8px;
  }
  .upgrade-card img {
    width: 40px; /* Smaller image */
    height: 40px;
    margin-bottom: 8px;
  }
  .upgrade-card p {
    font-size: 0.8rem; /* Smaller text */
    line-height: 1.2;
    margin-bottom: 8px;
  }
  .upgrade-card .level-badge {
    font-size: 0.8rem; /* Smaller text */
    padding: 2px 4px;
  }
}